
\newpage
\setcounter{page}{1}
\section{\textbf{TỔNG QUAN HỆ THỐNG}}

\subsection{Giới thiệu}
Trong bối cảnh thương mại điện tử phát triển mạnh mẽ, thị trường điện thoại thông minh tại Việt Nam luôn duy trì sự sôi động với doanh số hàng chục triệu máy mỗi năm. Các nền tảng lớn như Shopee, Lazada, Tiki tuy phổ biến nhưng thiếu khả năng phân tích cảm xúc tự động từ bình luận sản phẩm.

\textbf{VeritaShop} được xây dựng nhằm giải quyết các hạn chế trên:
\begin{itemize}
    \item Ứng dụng TMĐT chuyên biệt cho điện thoại với thông số kỹ thuật chi tiết
    \item Phân tích cảm xúc theo khía cạnh (ABSA) giúp người mua hiểu rõ ưu/nhược điểm
    \item Kiểm duyệt nội dung tự động bảo vệ cộng đồng
    \item Hệ thống quản trị toàn diện cho người bán
\end{itemize}

\subsection{Yêu cầu chức năng}

\textbf{Customer App (Mobile):}
\begin{itemize}
    \item \textbf{Xác thực}: Đăng ký, đăng nhập JWT, quên mật khẩu, PIN Lock bảo mật
    \item \textbf{Sản phẩm}: Xem danh sách, tìm kiếm, lọc theo brand/giá/tình trạng
    \item \textbf{Mua sắm}: Giỏ hàng, wishlist, checkout, áp dụng coupon
    \item \textbf{Thanh toán}: COD và MoMo (Deep Link + IPN callback)
    \item \textbf{Đánh giá}: Viết review 1-5 sao, xem phân tích ABSA tự động
\end{itemize}

\subsection{Kiến trúc hệ thống}

Hệ thống VeritaShop được thiết kế theo mô hình Client-Server với kiến trúc RESTful API:

\begin{itemize}
    \item \textbf{Mobile Client}: Flutter 3.8.1+ (Dart) - đa nền tảng Android, iOS, Web
    \item \textbf{Backend Server}: Node.js 18+ với Express.js framework
    \item \textbf{Database}: MongoDB Atlas (NoSQL) với Mongoose ODM
    \item \textbf{Tích hợp}: Cloudinary (ảnh), MoMo (thanh toán), VisoBERT (ABSA)
\end{itemize}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.95\textwidth]{image/sequence/1.png}
    \caption{Sơ đồ Kiến trúc Hệ thống VeritaShop}
    \label{fig:sys_arch}
\end{figure}

\subsection{Quy trình thanh toán MoMo}

Hệ thống tích hợp MoMo Payment Gateway với Deep Link và IPN callback:
\begin{enumerate}
    \item Người dùng checkout → Backend tạo Order với status "pending"
    \item Backend gọi MoMo API với HMAC-SHA256 signature → Nhận deeplink
    \item Flutter sử dụng url\_launcher mở MoMo app
    \item Người dùng xác nhận thanh toán trong app MoMo
    \item MoMo gửi IPN callback → Backend verify signature → Cập nhật paymentStatus
\end{enumerate}

