\newpage
\section{\textbf{THIẾT KẾ CƠ SỞ DỮ LIỆU}}

Hệ thống sử dụng MongoDB với 7 collections: \textbf{Users}, \textbf{Products}, \textbf{Carts}, \textbf{Orders}, \textbf{Payments}, \textbf{Reviews}, \textbf{Coupons}. Các collection liên kết qua ObjectId.

\textbf{Collections chính:}
\begin{itemize}
    \item \textbf{Users}: name, email, password (bcrypt), addresses[], role (user/admin), isLocked
    \item \textbf{Products}: name, brand, price, images[], specs \{ram, rom, chip, battery, screen, camera\}, colors[], condition, stock, rating
    \item \textbf{Orders}: user, orderNumber, items[], shippingAddress, paymentMethod, status (pending→confirmed→processing→shipping→delivered), total
    \item \textbf{Reviews}: user, product, rating, text, images[], \textbf{sentimentAnalysis[]} (ABSA), overallSentiment, isFlagged, moderationStatus
    \item \textbf{Payments}: order, method (COD/MoMo), amount, transId, status
    \item \textbf{Coupons}: code, discountType, discountValue, validUntil
    \item \textbf{Carts}: user, product, quantity, color
\end{itemize}

