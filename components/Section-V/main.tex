\newpage
\section{\textbf{PHÂN TÍCH VÀ THIẾT KẾ HỆ THỐNG}}

\subsection{Phân tích Use Case}

\textbf{Các tác nhân chính:}
\begin{itemize}
    \item \textbf{Khách hàng}: Đăng ký/nhập, xem sản phẩm, tìm kiếm, giỏ hàng, thanh toán, đánh giá
    \item \textbf{Quản trị viên}: Quản lý sản phẩm, đơn hàng, người dùng, coupon, kiểm duyệt đánh giá
    \item \textbf{Hệ thống MoMo}: Xử lý thanh toán, gửi kết quả IPN
    \item \textbf{Hệ thống AI}: Phân tích ABSA, Content Moderation
\end{itemize}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.5\textwidth]{image/sequence/3.png}
    \caption{Sơ đồ Use Case Tổng quát hệ thống VeritaShop}
    \label{fig:usecase}
\end{figure}

\subsection{Đặc tả Use Case chính}

\begin{table}[H]
\centering
\caption{Đặc tả các Use Case chính}
\renewcommand{\arraystretch}{1.25}
\begin{tabular}{|p{2.5cm}|p{2.2cm}|p{8cm}|}
\hline
\textbf{Use Case} & \textbf{Tác nhân} & \textbf{Mô tả} \\
\hline
Tìm kiếm sản phẩm & Khách hàng & Lọc brand/giá/tình trạng, sắp xếp giá/rating/mới \\
\hline
Thanh toán đơn hàng & Khách hàng & Checkout 5 bước → COD hoặc MoMo (Deep Link + IPN) \\
\hline
Đánh giá sản phẩm & Khách hàng & Viết review → Content Moderation → ABSA → Lưu \\
\hline
Quản lý đơn hàng & Admin & Xem/cập nhật trạng thái (pending→delivered/cancelled) \\
\hline
Kiểm duyệt đánh giá & Admin & Xem review flag + ABSA, Approve/Reject/Delete \\
\hline
\end{tabular}
\end{table}

\subsection{Luồng màn hình Customer App}

\begin{enumerate}
    \item \textbf{Khởi động}: Splash → Login/Register → Home
    \item \textbf{Mua sắm}: Home → Product List → Product Detail → Add to Cart / Buy Now
    \item \textbf{Thanh toán}: Cart → Checkout → Address → Payment → Order Success
    \item \textbf{Đơn hàng}: Profile → Order History → Order Detail
    \item \textbf{Đánh giá}: Product Detail → Reviews → Write Review → ABSA Result
\end{enumerate}

\subsection{Quy trình đánh giá với ABSA}

\textbf{Luồng xử lý chính:}

\text{Input} (1-5 sao, tiêu đề, nội dung, ảnh) $\rightarrow$ \text{Content Moderation} $\rightarrow$ \text{Flagged} $\rightarrow$ isFlagged=true $\rightarrow$ \text{Admin duyệt}

\text{hoặc} \text{Pass} $\rightarrow$ \text{ABSA Service} (\text{Aspect Detection} $\rightarrow$ \text{Sentiment Classification} $\rightarrow$ \text{Lưu Review} $\rightarrow$ \text{Cập nhật Rating})

\textbf{Hiển thị kết quả ABSA:}
\begin{itemize}
    \item Biểu đồ thanh ngang với màu sắc (xanh/đỏ/xám)
    % \item Confidence score cho mỗi phân tích
    \item Overall sentiment badge (Positive/Negative/Neutral/Mixed)
\end{itemize}

